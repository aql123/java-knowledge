# 死信队列

### 概念

死信，顾名思义就是无法被消费的消息，字面意思上可以这样理解，一般来说，producer 将消息投递到 broker 或者直接到 queue 里了，consumer 从 queue 取出消息进行消费，但某些时候由于**特定的原因导致 queue 中的某些消息无法被消费**，这样的消息如果没有进行处理，就变成了死信，有死信自然就有了死信队列。

例如为了保证订单业务的消息数据不丢失，需要使用到 RabbitMQ 的死信队列机制，当消息消费发生异常时，将消息投入到死信中，还有比如说用户在商城下单成功并点击去支付后在指定时间内未支付自动失效。

### 死信队列来源

- 消息 TTL 过期 (本例)
- 队列达到最大长度（即队列满了，无法再添加数据到mq中）
- 消息被拒绝（basic.reject 或 basic.nack）并且 requeue=false

## 本示例运行方式

* 1 先运行 `C2_消费者` 让它创建交换机和队列信息, 会自动停止. 
* 2 再运行 `C3_死信消费者`
* 3 最后运行 `C1_生产者`
